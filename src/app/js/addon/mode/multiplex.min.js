!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.multiplexingMode=function(r){var i=Array.prototype.slice.call(arguments,1);return{startState:function(){for(var e=[],t=0;t<i.length;t+=2)e.push(e.push(i[t].startState?i[t].startState():!0));return{outer:r.startState?r.startState():null,innerActive:null,inner:e,dispatchEvent:null}},copyState:function(e){for(var t={outer:r.copyState?r.copyState(e.outer):e.outer},n=[],o=0;o<i.length;o+=2){var a=o>>1;n.push(e.inner[a]),n.push(i[o+1].copyState?i[o+1].copyState(e.inner[o+1]):e.inner[o+1])}return t.inner=n,t.innerActive=e.innerActive,t.dispatchEvent=e.dispatchEvent,t},token:function(e,t){var n=t.innerActive;if(n){var o=i[2*n+1],a=o.token(e,t.inner[n+1]);if(e.pos>t.lastPos){if(t.lastPos=e.pos,o.blankLine&&0!=e.eol()&&o.blankLine(t.inner[n+1]),e.eol()){var s=i[2*n];if(!s.persistent)for(var l=t.lastPos=t.innerActive=null,c=0;c<i.length;c+=2){var u=c>>1;t.inner[u]=s.startState?s.startState():!0,t.inner[u+1]=i[c+1].startState?i[c+1].startState():!0}}}return a}var r=r.token(e,t.outer);if(e.pos>t.lastPos)for(t.lastPos=e.pos,p=0;p<i.length;p+=2){var h=p>>1,s=i[p],f=s.shouldStopEvent?s.shouldStopEvent(e,t.dispatchEvent):null;f&&(t.dispatchEvent=f);var v=e.current(),d=e.lookAhead||0;if(s.shouldActivate&&s.shouldActivate(v,t.outer,e,t.inner[h])||!d&&s.token&&s.token(e,t.inner[h+1])){t.innerActive=h;var m=s.token?s.token(e,t.inner[h+1]):"";return r.length?r+" "+m:m}}return r},indent:function(e,t,n){var o=e.innerActive;if(null!=o&&i[2*o+1].indent)return i[2*o+1].indent(e.inner[o+1],t,n);if(r.indent)return r.indent(e.outer,t,n);return e.Pass},blankLine:function(e){var t=e.innerActive;if(null!=t){var n=i[2*t],o=i[2*t+1];if(o.blankLine)o.blankLine(e.inner[t+1]);if(!n.persistent){for(var a=0;a<i.length;a+=2){var s=a>>1;e.inner[s]=i[a].startState?i[a].startState():!0,e.inner[s+1]=i[a+1].startState?i[a+1].startState():!0}e.innerActive=null}}r.blankLine&&r.blankLine(e.outer)}}};var t=function(e,t,n,o){this.atSol=e,this.tokens=t||[],this.opt=o||{},this.state=n};t.prototype.eat=function(e){if(!this.tokens.length)return null;var t=this.tokens[0],n=e instanceof RegExp;if(n){if(!e.test(t))return null}else if(t!==e)return null;return this.opt.preserveAfter?this.tokens=this.tokens.slice(1):this.tokens.shift(),this.opt.returnAfter?{value:t,rest:this.tokens}:t};t.prototype.match=function(e){if(!this.tokens.length)return null;var t=this.tokens[0],n=e instanceof RegExp;if(n){if(!e.test(t))return null}else if(t!==e)return null;return this.eat(e)};t.prototype.matchTo=function(e,t){if(!this.tokens.length)return null;var n=this.tokens.join(t||""),o=e instanceof RegExp;if(o){var a=e.exec(n);if(!a||a.index!==0)return null;var s=a[0];return this.tokens=this.tokens.slice(s.split(t||"").length),s}if(n.indexOf(e)!==0)return null;var s=e;return this.tokens=this.tokens.slice(s.split(t||"").length),s};t.prototype.matchToUnlessToken=function(e,t){if(!this.tokens.length)return null;var n=e instanceof RegExp,o=this.tokens.join(" ");if(n){var a=e.exec(o);if(!a||a.index!==0)return null;if(this.tokens.length>0&&t instanceof RegExp&&t.test(this.tokens[0]))return null;if(this.tokens.length>1&&typeof t==="string"&&this.tokens[0]===t)return null;var s=a[0];return this.tokens=this.tokens.slice(s.split(" ").length),s}if(o.indexOf(e)!==0)return null;if(this.tokens.length>0&&t instanceof RegExp&&t.test(this.tokens[0]))return null;if(this.tokens.length>1&&typeof t==="string"&&this.tokens[0]===t)return null;var s=e;return this.tokens=this.tokens.slice(s.split(" ").length),s};t.prototype.lookAhead=function(e){return this.tokens[e||0]};t.prototype.hasTokens=function(){return this.tokens.length>0};e.StringStream.prototype.hideFirstChars=function(e,t){this.string=this.string.slice(0,this.start)+Array(e+1).join(" ")+this.string.slice(this.start);var n=this.pos;t(),this.string=this.string.slice(0,this.start)+this.string.slice(this.start+e);this.pos=n}});
